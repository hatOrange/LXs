<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta tags with precise SEO optimization -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="description" content="Book professional pest control services with LX Pest Solutions in Adelaide. Easy online booking with same-day response. Get 20% off your first treatment.">
  <meta name="keywords" content="pest control booking, schedule pest treatment, Adelaide pest service, book pest inspection">
  <meta name="theme-color" content="#005792">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <!-- Performance optimization with resource hints -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="../css/styles.css" as="style" media="all">
  <link rel="preload" href="../css/print.css" as="print" media="print"> 
  <link rel="preload" href="images/booking-hero.jpg" as="image" fetchpriority="high">
  <link rel="preload" href="js/booking.js" as="script">
  
  <!-- Open Graph tags for social sharing -->
  <meta property="og:title" content="Book Pest Control Services | LX Pest Solutions Adelaide">
  <meta property="og:description" content="Schedule professional pest control services online. Fast, effective, and eco-friendly pest control solutions with our 100% satisfaction guarantee.">
  <meta property="og:image" content="https://www.lxpestsolutions.com.au/images/og-booking.jpg">
  <meta property="og:url" content="https://www.lxpestsolutions.com.au/booking.html">
  <meta property="og:type" content="website">
  
  <title>Book Pest Control Services | LX Pest Solutions Adelaide</title>
  
  <!-- Favicon and related icons -->
  <link rel="icon" type="image/png" href="images/favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  
  <!-- Stylesheets with conditional loading -->
  <link rel="stylesheet" href="../css/styles.css" media="all">
  <link rel="stylesheet" href="css/print.css" media="print">
  
  <!-- Font preconnect for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet" media="all" fetchpriority="high">
  
  <!-- Structured data for service offerings -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Service",
      "serviceType": "Pest Control Services",
      "provider": {
        "@type": "LocalBusiness",
        "name": "LX Pest Solutions",
        "image": "https://www.lxpestsolutions.com.au/images/logo.svg",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "56 Deeds Road",
          "addressLocality": "North Plympton",
          "addressRegion": "SA",
          "postalCode": "5037",
          "addressCountry": "AU"
        },
        "telephone": "+61883711277",
        "priceRange": "$$$",
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": -34.9483,
          "longitude": 138.5747
        }
      },
      "areaServed": {
        "@type": "City",
        "name": "Adelaide"
      },
      "offers": {
        "@type": "Offer",
        "priceCurrency": "AUD",
        "price": "199.00",
        "priceValidUntil": "2025-12-31",
        "availability": "https://schema.org/InStock",
        "validFrom": "2024-01-01"
      },
      "description": "Professional pest control services for residential and commercial properties in Adelaide. We offer comprehensive treatments for all common pests with eco-friendly solutions and a 100% satisfaction guarantee."
    }
  </script>
  
  <!-- Critical CSS for above-the-fold content -->
  <style>
    /**
     * Critical path CSS for booking page
     * Optimized for rendering performance and conversion
     */
    .booking-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 30px;
      padding: 40px 0;
    }
    
    @media (max-width: 768px) {
      .booking-container {
        grid-template-columns: 1fr;
      }
    }
    
    /**
     * Booking form with optimized styles for conversion
     */
    .booking-form {
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
    }
    
    .booking-sidebar {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 8px;
      position: sticky;
      top: 100px;
      height: fit-content;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    /**
     * Form layout with grid for responsive design
     */
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    @media (max-width: 600px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .form-field {
      margin-bottom: 20px;
    }
    
    .form-field.full-width {
      grid-column: 1 / -1;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: var(--primary-color);
    }
    
    /**
     * Form controls with optimized focus states
     */
    input, 
    select, 
    textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-family: var(--font-base);
      font-size: 16px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    
    input:focus, 
    select:focus, 
    textarea:focus {
      border-color: var(--secondary-color);
      box-shadow: 0 0 0 3px rgba(107, 162, 146, 0.2);
      outline: none;
    }
    
    input.error, 
    select.error, 
    textarea.error {
      border-color: #e74c3c;
      background-color: #fff8f8;
    }
    
    .error-message {
      color: #e74c3c;
      font-size: 0.875em;
      margin-top: 5px;
      display: none;
    }
    
    .error-message.show {
      display: block;
    }
    
    /**
     * Psychological triggers with visual cues
     */
    .urgency-message {
      color: #e74c3c;
      font-weight: 600;
      margin-bottom: 15px;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 0.8; }
      50% { opacity: 1; }
      100% { opacity: 0.8; }
    }
    
    .availability-counter {
      background: #f1f8e9;
      border-left: 4px solid var(--secondary-color);
      padding: 10px 15px;
      margin-bottom: 20px;
      font-weight: 600;
    }
    
    /**
     * Trust badges with hover effects
     */
    .trust-badges {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    .trust-badge {
      text-align: center;
      flex: 0 0 30%;
      margin-bottom: 15px;
      transition: transform 0.3s ease;
    }
    
    .trust-badge:hover {
      transform: translateY(-5px);
    }
    
    .trust-badge img {
      width: 50px;
      height: 50px;
      margin-bottom: 8px;
    }
    
    .trust-badge p {
      font-size: 0.9em;
      margin: 0;
    }
    
    /**
     * Guarantee box for risk reduction
     */
    .guarantee-box {
      background: #e8f5e9;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      text-align: center;
    }
    
    .guarantee-box h3 {
      color: var(--secondary-color);
      margin-bottom: 10px;
    }
    
    /**
     * Social proof elements
     */
    .testimonial-mini {
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      margin-top: 20px;
    }
    
    .testimonial-mini p:first-of-type {
      font-style: italic;
    }
    
    .testimonial-mini .customer {
      font-weight: 600;
      text-align: right;
      margin-top: 10px;
    }
    
    /**
     * Price comparison with anchoring effect
     */
    .price-comparison {
      margin-top: 20px;
    }
    
    .price-option {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .price-option:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    
    .price-option.premium {
      background: #f5f5f5;
    }
    
    .price-option.standard {
      background: #e8f5e9;
      border: 2px solid var(--secondary-color);
      position: relative;
    }
    
    .price-option.standard::after {
      content: "BEST VALUE";
      position: absolute;
      top: -10px;
      right: 10px;
      background: var(--accent-color);
      color: white;
      padding: 3px 8px;
      font-size: 0.7em;
      border-radius: 3px;
      font-weight: bold;
    }
    
    .price-option h3 {
      margin-top: 0;
      margin-bottom: 10px;
    }
    
    .price {
      font-size: 1.4em;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .original-price {
      text-decoration: line-through;
      color: #999;
      font-size: 0.8em;
      margin-right: 5px;
    }
    
    /**
     * Countdown timer for scarcity
     */
    .countdown-timer {
      background: #fff3e0;
      padding: 15px;
      border-radius: 5px;
      text-align: center;
      margin-bottom: 20px;
    }
    
    .countdown-timer h3 {
      margin-top: 0;
      margin-bottom: 10px;
      color: var(--accent-color);
    }
    
    .timer {
      font-weight: bold;
      font-size: 1.2em;
      letter-spacing: 1px;
    }
    
    /**
     * Real-time activity indicator
     */
    .live-activity-indicator {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      display: none;
      align-items: center;
      max-width: 280px;
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .activity-image {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
      object-fit: cover;
    }
    
    .activity-text {
      font-size: 0.9em;
    }
    
    .activity-name {
      font-weight: 600;
      color: var(--primary-color);
    }
    
    .close-activity {
      position: absolute;
      top: 5px;
      right: 5px;
      background: none;
      border: none;
      font-size: 1em;
      cursor: pointer;
      color: #999;
      padding: 0;
      line-height: 1;
    }
    
    /**
     * Step indicator for multi-step forms
     */
    .booking-steps {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      position: relative;
    }
    
    .booking-steps::before {
      content: "";
      position: absolute;
      top: 14px;
      left: 0;
      right: 0;
      height: 2px;
      background: #ddd;
      z-index: 1;
    }
    
    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
    }
    
    .step-number {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: #ddd;
      color: #555;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-bottom: 8px;
      transition: background-color 0.3s, color 0.3s;
    }
    
    .step-label {
      font-size: 0.85em;
      color: #555;
      transition: color 0.3s;
    }
    
    .step.active .step-number {
      background: var(--primary-color);
      color: white;
    }
    
    .step.active .step-label {
      color: var(--primary-color);
      font-weight: 600;
    }
    
    .step.completed .step-number {
      background: var(--secondary-color);
      color: white;
    }
    
    /**
     * Form steps visibility control
     */
    .form-step {
      display: none;
    }
    
    .form-step.active {
      display: block;
      animation: fadeIn 0.4s;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .step-navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    .btn-prev {
      background: #f5f5f5;
      color: #333;
      border: 1px solid #ddd;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }
    
    .btn-prev:hover {
      background: #e9e9e9;
    }
    
    .btn-next {
      background: var(--secondary-color);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s, transform 0.3s;
    }
    
    .btn-next:hover {
      background: #5a9382;
      transform: translateY(-2px);
    }
    
    /**
     * Service selection with visual indicators
     */
    .service-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .service-option {
      border: 2px solid #e9e9e9;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .service-option:hover {
      border-color: #bbb;
      transform: translateY(-3px);
    }
    
    .service-option.selected {
      border-color: var(--secondary-color);
      background: rgba(107, 162, 146, 0.05);
    }
    
    .service-option img {
      width: 60px;
      height: 60px;
      margin-bottom: 10px;
    }
    
    .service-option h4 {
      margin: 0 0 5px;
      color: var(--primary-color);
    }
    
    /**
     * Date and time selector
     */
    .date-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-bottom: 20px;
    }
    
    .date-option {
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 8px 0;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .date-option:hover {
      border-color: #bbb;
      background: #f9f9f9;
    }
    
    .date-option.selected {
      border-color: var(--secondary-color);
      background: rgba(107, 162, 146, 0.1);
    }
    
    .date-option .day-name {
      font-size: 0.8em;
      color: #777;
    }
    
    .date-option .day-number {
      font-size: 1.2em;
      font-weight: 600;
      color: #333;
    }
    
    .date-option.unavailable {
      opacity: 0.5;
      cursor: not-allowed;
      background: #f5f5f5;
    }
    
    .time-slots {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 10px;
    }
    
    .time-slot {
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .time-slot:hover {
      border-color: #bbb;
      background: #f9f9f9;
    }
    
    .time-slot.selected {
      border-color: var(--secondary-color);
      background: rgba(107, 162, 146, 0.1);
    }
    
    .time-slot.unavailable {
      opacity: 0.5;
      cursor: not-allowed;
      background: #f5f5f5;
    }
    
    .limited-slots {
      color: #e74c3c;
      font-size: 0.8em;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <!-- Accessibility skip link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Header -->
  <header class="site-header" role="banner">
    <div class="container">
      <div class="header-inner">
        <div class="logo">
          <a href="index.html" aria-label="LX Pest Solutions - Home">
            <img src="images/logo.svg" alt="LX Pest Solutions Logo" width="180" height="40" loading="eager" decoding="async">
          </a>
        </div>
        <button id="mobileMenuToggle" class="mobile-menu-toggle" aria-expanded="false" aria-controls="main-navigation" aria-label="Toggle navigation menu">
          <span class="sr-only">Menu</span>
          <span class="hamburger"></span>
        </button>
        <nav class="main-nav" aria-label="Main navigation">
          <ul id="main-navigation">
            <li><a href="index.html">Home</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="booking.html" class="active cta" aria-current="page">Book Now</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- Hero section -->
  <section class="hero secondary-hero" style="background-image: url('images/booking-hero.jpg');" aria-label="Booking Page Hero">
    <div class="hero-overlay">
      <h1>Book Your Pest Control Service</h1>
      <p>Fast, effective, and eco-friendly solutions for your home or business</p>
    </div>
  </section>

  <!-- Main content -->
  <main id="main-content" class="booking-container container">
    <!-- Booking form section -->
    <section class="booking-form">
      <h2>Schedule Your Service</h2>
      
      <!-- Countdown timer for urgency -->
      <div class="countdown-timer">
        <h3>Limited Time Offer</h3>
        <p>Get 20% off your first service</p>
        <div class="timer" id="countdown" aria-live="polite">23:59:59</div>
      </div>
      
      <!-- Availability counter for scarcity -->
      <div class="availability-counter">
        <p><strong>High demand alert:</strong> Only <span id="availableSlots">7</span> slots available this week!</p>
      </div>
      
      <!-- Multi-step booking form -->
      <div class="booking-steps">
        <div class="step active" data-step="1">
          <div class="step-number">1</div>
          <div class="step-label">Service</div>
        </div>
        <div class="step" data-step="2">
          <div class="step-number">2</div>
          <div class="step-label">Schedule</div>
        </div>
        <div class="step" data-step="3">
          <div class="step-number">3</div>
          <div class="step-label">Details</div>
        </div>
        <div class="step" data-step="4">
          <div class="step-number">4</div>
          <div class="step-label">Confirm</div>
        </div>
      </div>

      <form id="bookingForm" action="/api/booking" method="POST" novalidate>
        <!-- Step 1: Service Selection -->
        <div class="form-step active" id="step1">
          <h3>Select Your Service</h3>
          
          <div class="service-options">
            <div class="service-option" data-value="residential">
              <img src="images/residential-icon.svg" alt="" aria-hidden="true" width="60" height="60" loading="lazy" decoding="async">
              <h4>Residential</h4>
              <p>General pest control for homes</p>
            </div>
            
            <div class="service-option" data-value="commercial">
              <img src="images/commercial-icon.svg" alt="" aria-hidden="true" width="60" height="60" loading="lazy" decoding="async">
              <h4>Commercial</h4>
              <p>Solutions for businesses</p>
            </div>
            
            <div class="service-option featured" data-value="termite">
              <img src="images/termite-icon.svg" alt="" aria-hidden="true" width="60" height="60" loading="lazy" decoding="async">
              <h4>Termite</h4>
              <p>Inspection & treatment</p>
              <span class="popular-tag">Popular</span>
            </div>
            
            <div class="service-option" data-value="rodent">
              <img src="images/rodent-icon.svg" alt="" aria-hidden="true" width="60" height="60" loading="lazy" decoding="async">
              <h4>Rodent</h4>
              <p>Mice & rat control</p>
            </div>
            
            <div class="service-option" data-value="insect">
              <img src="images/insect-icon.svg" alt="" aria-hidden="true" width="60" height="60" loading="lazy" decoding="async">
              <h4>Insect</h4>
              <p>Ants, spiders & more</p>
            </div>
          </div>
          
          <input type="hidden" id="serviceType" name="service" required>
          <div id="serviceError" class="error-message">Please select a service type</div>
          
          <!-- Property size selection -->
          <div class="form-field">
            <label for="propertySize">Property Size</label>
            <select id="propertySize" name="propertySize">
              <option value="">-- Select Size --</option>
              <option value="small">Small (1-2 Bedrooms)</option>
              <option value="medium">Medium (3-4 Bedrooms)</option>
              <option value="large">Large (5+ Bedrooms)</option>
              <option value="commercial">Commercial Space</option>
            </select>
          </div>
          
          <!-- Step navigation -->
          <div class="step-navigation">
            <div></div> <!-- Empty div for alignment -->
            <button type="button" class="btn-next" id="toStep2">Continue to Schedule</button>
          </div>
        </div>
        
        <!-- Step 2: Schedule Selection -->
        <div class="form-step" id="step2">
          <h3>Select Date & Time</h3>
          
          <!-- Date picker -->
          <h4>Preferred Date</h4>
          <div class="date-grid" id="dateGrid">
            <!-- Date options will be dynamically generated -->
          </div>
          <input type="hidden" id="selectedDate" name="preferredDate" required>
          <div id="dateError" class="error-message">Please select a date</div>
          
          <!-- Time picker -->
          <h4>Preferred Time</h4>
          <div class="time-slots" id="timeSlots">
            <div class="time-slot" data-value="morning">
              <span class="time-label">Morning</span>
              <span class="time-range">8:00 AM - 12:00 PM</span>
            </div>
            <div class="time-slot" data-value="afternoon">
              <span class="time-label">Afternoon</span>
              <span class="time-range">12:00 PM - 4:00 PM</span>
            </div>
            <div class="time-slot" data-value="evening">
              <span class="time-label">Evening</span>
              <span class="time-range">4:00 PM - 6:00 PM</span>
              <span class="limited-slots">Limited slots!</span>
            </div>
          </div>
          <input type="hidden" id="selectedTime" name="preferredTime" required>
          <div id="timeError" class="error-message">Please select a time slot</div>
          
          <!-- Step navigation -->
          <div class="step-navigation">
            <button type="button" class="btn-prev" id="backToStep1">Back</button>
            <button type="button" class="btn-next" id="toStep3">Continue to Details</button>
          </div>
        </div>
        
        <!-- Step 3: Customer Details -->
        <div class="form-step" id="step3">
          <h3>Your Details</h3>
          
          <div class="form-grid">
            <div class="form-field">
              <label for="name">Full Name <span class="required">*</span></label>
              <input type="text" id="name" name="name" required aria-required="true" autocomplete="name" aria-describedby="nameError">
              <div id="nameError" class="error-message">Please enter your full name</div>
            </div>
            
            <div class="form-field">
              <label for="phone">Phone Number <span class="required">*</span></label>
              <input type="tel" id="phone" name="phone" required aria-required="true" autocomplete="tel" aria-describedby="phoneError">
              <div id="phoneError" class="error-message">Please enter a valid phone number</div>
            </div>
            
            <div class="form-field">
              <label for="email">Email Address <span class="required">*</span></label>
              <input type="email" id="email" name="email" required aria-required="true" autocomplete="email" aria-describedby="emailError">
              <div id="emailError" class="error-message">Please enter a valid email address</div>
            </div>
            
            <div class="form-field full-width">
              <label for="street">Street Address <span class="required">*</span></label>
              <input type="text" id="street" name="address[street]" required aria-required="true" autocomplete="street-address" aria-describedby="streetError">
              <div id="streetError" class="error-message">Please enter your street address</div>
            </div>
            
            <div class="form-field">
              <label for="city">City/Suburb <span class="required">*</span></label>
              <input type="text" id="city" name="address[city]" required aria-required="true" autocomplete="address-level2" aria-describedby="cityError">
              <div id="cityError" class="error-message">Please enter your city or suburb</div>
            </div>
            
            <div class="form-field">
              <label for="postalCode">Postal Code <span class="required">*</span></label>
              <input type="text" id="postalCode" name="address[postalCode]" required aria-required="true" autocomplete="postal-code" aria-describedby="postalCodeError">
              <div id="postalCodeError" class="error-message">Please enter a valid postal code</div>
            </div>
            
            <div class="form-field full-width">
              <label for="notes">Additional Notes</label>
              <textarea id="notes" name="notes" rows="3" placeholder="Tell us about your pest issues or any special requirements"></textarea>
            </div>
          </div>
          
          <!-- Step navigation -->
          <div class="step-navigation">
            <button type="button" class="btn-prev" id="backToStep2">Back</button>
            <button type="button" class="btn-next" id="toStep4">Review Booking</button>
          </div>
        </div>
        
        <!-- Step 4: Confirmation -->
        <div class="form-step" id="step4">
          <h3>Review Your Booking</h3>
          
          <div class="booking-summary">
            <div class="summary-section">
              <h4>Service Details</h4>
              <div class="summary-item">
                <span class="summary-label">Service Type:</span>
                <span class="summary-value" id="summaryService">--</span>
              </div>
              <div class="summary-item">
                <span class="summary-label">Property Size:</span>
                <span class="summary-value" id="summaryPropertySize">--</span>
              </div>
            </div>
            
            <div class="summary-section">
              <h4>Schedule</h4>
              <div class="summary-item">
                <span class="summary-label">Date:</span>
                <span class="summary-value" id="summaryDate">--</span>
              </div>
              <div class="summary-item">
                <span class="summary-label">Time:</span>
                <span class="summary-value" id="summaryTime">--</span>
              </div>
            </div>
            
            <div class="summary-section">
              <h4>Contact Information</h4>
              <div class="summary-item">
                <span class="summary-label">Name:</span>
                <span class="summary-value" id="summaryName">--</span>
              </div>
              <div class="summary-item">
                <span class="summary-label">Phone:</span>
                <span class="summary-value" id="summaryPhone">--</span>
              </div>
              <div class="summary-item">
                <span class="summary-label">Email:</span>
                <span class="summary-value" id="summaryEmail">--</span>
              </div>
              <div class="summary-item">
                <span class="summary-label">Address:</span>
                <span class="summary-value" id="summaryAddress">--</span>
              </div>
            </div>
            
            <div class="summary-section">
              <h4>Price Estimate</h4>
              <div class="summary-item total">
                <span class="summary-label">Total:</span>
                <span class="summary-value" id="summaryPrice">$299</span>
              </div>
              <div class="discount-tag" id="discountTag">First-time customer discount: 20% OFF</div>
            </div>
          </div>
          
          <!-- Terms and conditions -->
          <div class="form-field">
            <div class="checkbox-container">
              <input type="checkbox" id="terms" name="terms" required aria-required="true" aria-describedby="termsError">
              <label for="terms">I agree to the <a href="terms.html" target="_blank">Terms & Conditions</a> and <a href="privacy.html" target="_blank">Privacy Policy</a></label>
            </div>
            <div id="termsError" class="error-message">You must agree to the terms and conditions</div>
          </div>
          
          <!-- Guarantee message -->
          <div class="guarantee-box">
            <h3>100% Satisfaction Guarantee</h3>
            <p>Not happy with our service? We'll return for free until your pest problems are resolved.</p>
          </div>
          
          <!-- Step navigation -->
          <div class="step-navigation">
            <button type="button" class="btn-prev" id="backToStep3">Back</button>
            <button type="submit" class="btn-next" id="submitBooking">
              <span class="button-text">Confirm Booking</span>
              <span class="spinner" aria-hidden="true"></span>
            </button>
          </div>
        </div>
      </form>
    </section>
    
    <!-- Sidebar with trust elements -->
    <aside class="booking-sidebar">
      <h3>Why Choose Us?</h3>
      
      <!-- Trust badges -->
      <div class="trust-badges">
        <div class="trust-badge">
          <img src="images/certified-icon.svg" alt="" aria-hidden="true" width="50" height="50" loading="lazy" decoding="async">
          <p>Licensed Professionals</p>
        </div>
        <div class="trust-badge">
          <img src="images/eco-friendly-icon.svg" alt="" aria-hidden="true" width="50" height="50" loading="lazy" decoding="async">
          <p>Eco-Friendly Solutions</p>
        </div>
        <div class="trust-badge">
          <img src="images/guarantee-icon.svg" alt="" aria-hidden="true" width="50" height="50" loading="lazy" decoding="async">
          <p>100% Guaranteed</p>
        </div>
      </div>
      
      <!-- Testimonial for social proof -->
      <div class="testimonial-mini">
        <p>"LX Pest Solutions came to our home on short notice and completely eliminated our ant problem. Professional service from start to finish!"</p>
        <p class="customer">- Sarah M. in Glenelg</p>
      </div>
      
      <!-- Pricing with anchoring effect -->
      <div class="price-comparison">
        <h3>Our Service Packages</h3>
        
        <div class="price-option premium">
          <h3>Premium Pest Control</h3>
          <div class="price">$499</div>
          <p>Comprehensive protection for large properties with multiple pest issues</p>
        </div>
        
        <div class="price-option standard">
          <h3>Standard Pest Control</h3>
          <div class="price"><span class="original-price">$399</span> $299</div>
          <p>Complete treatment for average-sized homes with common pest problems</p>
        </div>
      </div>
      
      <!-- Social proof element -->
      <div class="social-proof">
        <p><strong>23 people booked this week</strong></p>
      </div>
      
      <!-- Customer support info -->
      <div class="customer-support">
        <h3>Need Help?</h3>
        <p>Call us at <a href="tel:+61883711277">8371 1277</a> for assistance with your booking.</p>
      </div>
    </aside>
  </main>

  <!-- Real-time activity notification (hidden by default) -->
  <div class="live-activity-indicator" id="liveActivity" aria-live="polite" role="status">
    <img src="images/user-avatar.jpg" alt="" aria-hidden="true" class="activity-image" width="40" height="40" loading="lazy" decoding="async">
    <div class="activity-text">
      <span class="activity-name">Michael</span> just booked a termite inspection in Norwood
    </div>
    <button class="close-activity" aria-label="Close notification">&times;</button>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <img src="images/logo-white.svg" alt="LX Pest Solutions" width="180" height="40" loading="lazy" decoding="async">
          <p>Adelaide's most trusted pest control solution since 2010.</p>
        </div>
        
        <nav class="footer-nav" aria-label="Footer Navigation">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="booking.html">Book Now</a></li>
            <li><a href="privacy.html">Privacy Policy</a></li>
          </ul>
        </nav>
        
        <div class="contact-info">
          <h3>Contact Us</h3>
          <address>
            <p>56 Deeds Road, North Plympton, SA 5037</p>
            <p>
              <a href="tel:+61883711277">8371 1277</a><br>
              <a href="mailto:info@lxpestsolutions.com.au">info@lxpestsolutions.com.au</a>
            </p>
          </address>
        </div>
        
        <div class="social-links">
          <h3>Follow Us</h3>
          <div class="social-icons">
            <a href="https://facebook.com/lxpestsolutions" aria-label="Facebook" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 0 0 8.44-9.9c0-5.53-4.5-10.02-10-10.02z" fill="currentColor"/>
              </svg>
            </a>
            <a href="https://instagram.com/lxpestsolutions" aria-label="Instagram" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M12 2.16c3.2 0 3.58.01 4.85.07 1.17.05 1.8.25 2.23.41.56.22.96.48 1.38.9.42.42.68.82.9 1.38.17.42.36 1.06.41 2.23.06 1.27.07 1.65.07 4.85s-.01 3.58-.07 4.85c-.05 1.17-.25 1.8-.41 2.23-.22.56-.48.96-.9 1.38-.42.42-.82.68-1.38.9-.42.17-1.06.36-2.23.41-1.27.06-1.65.07-4.85.07s-3.58-.01-4.85-.07c-1.17-.05-1.8-.25-2.23-.41-.56-.22-.96-.48-1.38-.9-.42-.42-.68-.82-.9-1.38-.17-.42-.36-1.06-.41-2.23-.06-1.27-.07-1.65-.07-4.85s.01-3.58.07-4.85c.05-1.17.25-1.8.41-2.23.22-.56.48-.96.9-1.38.42-.42.82-.68 1.38-.9.42-.17 1.06-.36 2.23-.41 1.27-.06 1.65-.07 4.85-.07m0-2.16c-3.26 0-3.67.01-4.95.07-1.28.06-2.15.26-2.91.56-.79.31-1.46.72-2.13 1.38-.66.67-1.07 1.34-1.38 2.13-.3.76-.5 1.63-.56 2.91-.06 1.28-.07 1.69-.07 4.95s.01 3.67.07 4.95c.06 1.28.26 2.15.56 2.91.31.79.72 1.46 1.38 2.13.67.66 1.34 1.07 2.13 1.38.76.3 1.63.5 2.91.56 1.28.06 1.69.07 4.95.07s3.67-.01 4.95-.07c1.28-.06 2.15-.26 2.91-.56.79-.31 1.46-.72 2.13-1.38.66-.67 1.07-1.34 1.38-2.13.3-.76.5-1.63.56-2.91.06-1.28.07-1.69.07-4.95s-.01-3.67-.07-4.95c-.06-1.28-.26-2.15-.56-2.91-.31-.79-.72-1.46-1.38-2.13-.67-.66-1.34-1.07-2.13-1.38-.76-.3-1.63-.5-2.91-.56-1.28-.06-1.69-.07-4.95-.07z" fill="currentColor"/>
                <path d="M12 5.84c-3.4 0-6.16 2.76-6.16 6.16s2.76 6.16 6.16 6.16 6.16-2.76 6.16-6.16-2.76-6.16-6.16-6.16zm0 10.15c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" fill="currentColor"/>
                <circle cx="18.41" cy="5.59" r="1.44" fill="currentColor"/>
              </svg>
            </a>
            <a href="https://linkedin.com/company/lxpestsolutions" aria-label="LinkedIn" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z" fill="currentColor"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p class="copyright">&copy; 2025 LX Pest Solutions. All rights reserved.</p>
        <p class="footer-legal">
          <a href="terms.html">Terms & Conditions</a> |
          <a href="privacy.html">Privacy Policy</a>
        </p>
      </div>
    </div>
  </footer>

  <!-- Main JavaScript -->
  <script src="../js/scripts.js" defer></script>
  
  <!-- Page-specific JavaScript with optimized performance -->
  <script src="js/booking.js" defer></script>
  
  <!-- Inline script for critical functionality -->
  <script>
    /**
     * Booking form functionality with performance optimizations
     * Uses modern JavaScript features and best practices
     */
    document.addEventListener('DOMContentLoaded', () => {
      // Cache DOM elements for better performance
      const els = {
        // Steps
        steps: document.querySelectorAll('.step'),
        formSteps: document.querySelectorAll('.form-step'),
        // Navigation buttons
        toStep2: document.getElementById('toStep2'),
        toStep3: document.getElementById('toStep3'),
        toStep4: document.getElementById('toStep4'),
        backToStep1: document.getElementById('backToStep1'),
        backToStep2: document.getElementById('backToStep2'),
        backToStep3: document.getElementById('backToStep3'),
        submitButton: document.getElementById('submitBooking'),
        // Form fields
        serviceOptions: document.querySelectorAll('.service-option'),
        serviceInput: document.getElementById('serviceType'),
        propertySize: document.getElementById('propertySize'),
        dateGrid: document.getElementById('dateGrid'),
        timeSlots: document.querySelectorAll('.time-slot'),
        selectedDate: document.getElementById('selectedDate'),
        selectedTime: document.getElementById('selectedTime'),
        // Form and validation
        bookingForm: document.getElementById('bookingForm'),
        formErrors: document.querySelectorAll('.error-message'),
        // Summary elements
        summaryService: document.getElementById('summaryService'),
        summaryPropertySize: document.getElementById('summaryPropertySize'),
        summaryDate: document.getElementById('summaryDate'),
        summaryTime: document.getElementById('summaryTime'),
        summaryName: document.getElementById('summaryName'),
        summaryPhone: document.getElementById('summaryPhone'),
        summaryEmail: document.getElementById('summaryEmail'),
        summaryAddress: document.getElementById('summaryAddress'),
        summaryPrice: document.getElementById('summaryPrice'),
        // Countdown and availability
        countdown: document.getElementById('countdown'),
        availableSlots: document.getElementById('availableSlots'),
        // Activity notification
        liveActivity: document.getElementById('liveActivity'),
        closeActivity: document.querySelector('.close-activity')
      };
      
      /**
       * Navigation between form steps
       * Uses data attributes for performance and maintainability
       */
      const goToStep = (stepNumber) => {
        // Validate current step before proceeding
        if (stepNumber > 1 && !validateStep(stepNumber - 1)) {
          return false;
        }
        
        // Update steps UI
        els.steps.forEach(step => {
          const stepNum = parseInt(step.dataset.step);
          if (stepNum < stepNumber) {
            step.classList.add('completed');
            step.classList.remove('active');
          } else if (stepNum === stepNumber) {
            step.classList.add('active');
            step.classList.remove('completed');
          } else {
            step.classList.remove('active', 'completed');
          }
        });
        
        // Show only the active form step
        els.formSteps.forEach(formStep => {
          formStep.classList.remove('active');
        });
        document.getElementById(`step${stepNumber}`).classList.add('active');
        
        // Update summary if going to confirmation step
        if (stepNumber === 4) {
          updateSummary();
        }
        
        return true;
      };
      
      /**
       * Validation for each step
       * @param {number} stepNumber - The step to validate
       * @returns {boolean} - Validation result
       */
      const validateStep = (stepNumber) => {
        let isValid = true;
        
        // Reset all error messages
        els.formErrors.forEach(error => error.classList.remove('show'));
        
        switch(stepNumber) {
          case 1:
            // Service selection validation
            if (!els.serviceInput.value) {
              document.getElementById('serviceError').classList.add('show');
              isValid = false;
            }
            break;
            
          case 2:
            // Date and time validation
            if (!els.selectedDate.value) {
              document.getElementById('dateError').classList.add('show');
              isValid = false;
            }
            if (!els.selectedTime.value) {
              document.getElementById('timeError').classList.add('show');
              isValid = false;
            }
            break;
            
          case 3:
            // Customer details validation
            const requiredFields = ['name', 'phone', 'email', 'street', 'city', 'postalCode'];
            
            requiredFields.forEach(field => {
              const fieldEl = document.getElementById(field);
              if (!fieldEl.value.trim()) {
                document.getElementById(`${field}Error`).classList.add('show');
                isValid = false;
              } else if (field === 'email' && !isValidEmail(fieldEl.value)) {
                document.getElementById('emailError').textContent = 'Please enter a valid email address';
                document.getElementById('emailError').classList.add('show');
                isValid = false;
              } else if (field === 'phone' && !isValidPhone(fieldEl.value)) {
                document.getElementById('phoneError').textContent = 'Please enter a valid phone number';
                document.getElementById('phoneError').classList.add('show');
                isValid = false;
              }
            });
            break;
        }
        
        return isValid;
      };
      
      /**
       * Email validation with regex
       * @param {string} email - Email to validate
       * @returns {boolean} - Validation result
       */
      const isValidEmail = (email) => {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      };
      
      /**
       * Phone validation with regex for Australian numbers
       * @param {string} phone - Phone to validate
       * @returns {boolean} - Validation result
       */
      const isValidPhone = (phone) => {
        return /^(?:\+61|0)[2-478](?:[ -]?[0-9]){8}$/.test(phone.replace(/\s+/g, ''));
      };
      
      /**
       * Service selection handler
       * Uses event delegation for performance
       */
      document.addEventListener('click', (e) => {
        const serviceOption = e.target.closest('.service-option');
        if (serviceOption) {
          // Remove selection from all options
          els.serviceOptions.forEach(option => {
            option.classList.remove('selected');
          });
          
          // Add selection to clicked option
          serviceOption.classList.add('selected');
          
          // Update hidden input value
          els.serviceInput.value = serviceOption.dataset.value;
          
          // Hide error message if visible
          document.getElementById('serviceError').classList.remove('show');
        }
      });
      
      /**
       * Time slot selection handler
       */
      els.timeSlots.forEach(slot => {
        if (slot.classList.contains('unavailable')) return;
        
        slot.addEventListener('click', function() {
          els.timeSlots.forEach(s => s.classList.remove('selected'));
          this.classList.add('selected');
          els.selectedTime.value = this.dataset.value;
          document.getElementById('timeError').classList.remove('show');
        });
      });
      
      /**
       * Generate date grid dynamically for next 14 days
       * Excludes Sundays and randomly marks some dates as unavailable
       */
      const generateDateGrid = () => {
        const dateGrid = document.getElementById('dateGrid');
        if (!dateGrid) return;
        
        const today = new Date();
        let html = '';
        
        // Today and next 13 days
        for (let i = 0; i < 14; i++) {
          const date = new Date();
          date.setDate(today.getDate() + i);
          
          // Skip Sundays (day 0)
          if (date.getDay() === 0) continue;
          
          // Format date for display and value
          const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
          const dayNumber = date.getDate();
          const monthName = date.toLocaleDateString('en-US', { month: 'short' });
          const formattedDate = date.toISOString().split('T')[0];
          
          // Mark some dates as unavailable (for demonstration)
          const isUnavailable = i === 2 || i === 5 || i === 9;
          const unavailableClass = isUnavailable ? ' unavailable' : '';
          
          html += `
            <div class="date-option${unavailableClass}" data-date="${formattedDate}" ${isUnavailable ? 'aria-disabled="true"' : ''}>
              <div class="day-name">${dayName}</div>
              <div class="day-number">${dayNumber}</div>
              <div class="month-name">${monthName}</div>
            </div>
          `;
        }
        
        dateGrid.innerHTML = html;
        
        // Add click listeners to date options
        const dateOptions = dateGrid.querySelectorAll('.date-option:not(.unavailable)');
        dateOptions.forEach(dateOption => {
          dateOption.addEventListener('click', function() {
            dateOptions.forEach(d => d.classList.remove('selected'));
            this.classList.add('selected');
            els.selectedDate.value = this.dataset.date;
            document.getElementById('dateError').classList.remove('show');
          });
        });
      };
      
      /**
       * Update booking summary before confirmation
       * Populates all summary fields with user selections
       */
      const updateSummary = () => {
        // Service info
        if (els.serviceInput.value) {
          const selectedService = document.querySelector(`.service-option[data-value="${els.serviceInput.value}"]`);
          if (selectedService) {
            els.summaryService.textContent = selectedService.querySelector('h4').textContent;
          } else {
            els.summaryService.textContent = els.serviceInput.value.charAt(0).toUpperCase() + els.serviceInput.value.slice(1);
          }
        }
        
        // Property size
        const propertySizeSelect = document.getElementById('propertySize');
        if (propertySizeSelect.value) {
          els.summaryPropertySize.textContent = propertySizeSelect.options[propertySizeSelect.selectedIndex].text;
        } else {
          els.summaryPropertySize.textContent = 'Not specified';
        }
        
        // Date and time
        if (els.selectedDate.value) {
          const date = new Date(els.selectedDate.value);
          els.summaryDate.textContent = date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        }
        
        if (els.selectedTime.value) {
          const selectedTimeSlot = document.querySelector(`.time-slot[data-value="${els.selectedTime.value}"]`);
          if (selectedTimeSlot) {
            els.summaryTime.textContent = `${selectedTimeSlot.querySelector('.time-label').textContent} (${selectedTimeSlot.querySelector('.time-range').textContent})`;
          } else {
            els.summaryTime.textContent = els.selectedTime.value.charAt(0).toUpperCase() + els.selectedTime.value.slice(1);
          }
        }
        
        // Contact info
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const email = document.getElementById('email').value;
        const street = document.getElementById('street').value;
        const city = document.getElementById('city').value;
        const postalCode = document.getElementById('postalCode').value;
        
        els.summaryName.textContent = name || '--';
        els.summaryPhone.textContent = phone || '--';
        els.summaryEmail.textContent = email || '--';
        els.summaryAddress.textContent = [street, city, postalCode].filter(Boolean).join(', ') || '--';
        
        // Price based on service type and property size
        let price = 299; // Default price
        
        if (els.serviceInput.value === 'termite') {
          price = 399;
        } else if (els.serviceInput.value === 'commercial') {
          price = 499;
        }
        
        if (els.propertySize.value === 'large') {
          price *= 1.2;
        } else if (els.propertySize.value === 'commercial') {
          price *= 1.5;
        }
        
        els.summaryPrice.textContent = `$${Math.round(price)}`;
      };
      
      /**
       * Countdown timer functionality
       * Uses performance-optimized timing
       */
      const startCountdown = () => {
        if (!els.countdown) return;
        
        let hours = 23;
        let minutes = 59;
        let seconds = 59;
        
        // Use requestAnimationFrame for smoother rendering
        let lastTime = 0;
        const fps = 1; // Update once per second
        const interval = 1000 / fps;
        
        const animate = (timestamp) => {
          if (!lastTime) lastTime = timestamp;
          const elapsed = timestamp - lastTime;
          
          if (elapsed > interval) {
            seconds--;
            
            if (seconds < 0) {
              seconds = 59;
              minutes--;
            }
            
            if (minutes < 0) {
              minutes = 59;
              hours--;
            }
            
            if (hours < 0) {
              hours = 23;
            }
            
            els.countdown.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            lastTime = timestamp;
          }
          
          requestAnimationFrame(animate);
        };
        
        requestAnimationFrame(animate);
      };
      
      /**
       * Decrease available slots for FOMO effect
       * Uses randomized intervals for natural appearance
       */
      const decreaseAvailability = () => {
        if (!els.availableSlots) return;
        
        let slots = parseInt(els.availableSlots.textContent);
        
        const decreaseSlot = () => {
          if (slots > 1) {
            slots--;
            els.availableSlots.textContent = slots;
            
            // Visual feedback
            els.availableSlots.parentElement.style.backgroundColor = '#ffecb3';
            setTimeout(() => {
              els.availableSlots.parentElement.style.backgroundColor = '#f1f8e9';
            }, 1000);
            
            // Schedule next decrease
            setTimeout(decreaseSlot, Math.random() * (360000 - 180000) + 180000); // 3-6 minutes
          }
        };
        
        // Initial delay
        setTimeout(decreaseSlot, 120000 + Math.random() * 180000); // 2-5 minutes
      };
      
      /**
       * Real-time activity notifications for social proof
       * Uses optimized DOM manipulation and timing
       */
      const showActivityNotifications = () => {
        if (!els.liveActivity) return;
        
        // Activity data
        const activityData = [
          { name: 'John', location: 'Prospect', service: 'pest inspection' },
          { name: 'Sarah', location: 'Norwood', service: 'termite treatment' },
          { name: 'Michael', location: 'Glenelg', service: 'rodent control' },
          { name: 'Emma', location: 'Semaphore', service: 'cockroach treatment' },
          { name: 'David', location: 'North Adelaide', service: 'ant control' },
          { name: 'Jessica', location: 'Burnside', service: 'spider removal' },
          { name: 'Robert', location: 'Henley Beach', service: 'commercial pest control' },
          { name: 'Lisa', location: 'Mitcham', service: 'pest inspection' }
        ];
        
        // Close button functionality
        if (els.closeActivity) {
          els.closeActivity.addEventListener('click', hideActivity);
        }
        
        // Show a random activity notification after initial delay
        setTimeout(showRandomActivity, 25000 + Math.random() * 20000);
        
        function showRandomActivity() {
          // Get random activity
          const activity = activityData[Math.floor(Math.random() * activityData.length)];
          
          // Update content
          const textEl = els.liveActivity.querySelector('.activity-text');
          if (textEl) {
            const nameEl = textEl.querySelector('.activity-name');
            if (nameEl) nameEl.textContent = activity.name;
            textEl.innerHTML = textEl.innerHTML.replace(/just booked.*$/, `just booked a ${activity.service} in ${activity.location}`);
          }
          
          // Show notification
          els.liveActivity.style.display = 'flex';
          
          // Auto-hide after 8 seconds
          setTimeout(hideActivity, 8000);
          
          // Schedule next notification
          setTimeout(showRandomActivity, 60000 + Math.random() * 120000); // 1-3 minutes
        }
        
        function hideActivity() {
          els.liveActivity.style.display = 'none';
        }
      };
      
      /**
       * Form submission handler
       * Implements validation, error handling, and loading state
       */
      els.bookingForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Final validation
        if (!validateStep(4)) {
          return;
        }
        
        // Check terms agreement
        if (!document.getElementById('terms').checked) {
          document.getElementById('termsError').classList.add('show');
          return;
        }
        
        // Show loading state
        els.submitButton.disabled = true;
        els.submitButton.classList.add('loading');
        els.submitButton.querySelector('.button-text').textContent = 'Processing...';
        
        try {
          // Collect form data
          const formData = new FormData(els.bookingForm);
          const data = Object.fromEntries(formData.entries());
          
          // Process address object properly
          data.address = {
            street: data['address[street]'],
            city: data['address[city]'],
            state: 'SA', // Default to South Australia
            postalCode: data['address[postalCode]']
          };
          
          // Clean up the redundant keys
          delete data['address[street]'];
          delete data['address[city]'];
          delete data['address[postalCode]'];
          
          // Simulate API call with delay (replace with actual API call in production)
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          // Simulate successful booking
          // Redirect to confirmation page
          window.location.href = 'booking-confirmation.html?ref=' + Math.random().toString(36).substring(2, 10);
        } catch (error) {
          console.error('Booking submission error:', error);
          
          // Display error message
          const errorEl = document.createElement('div');
          errorEl.className = 'form-error-message';
          errorEl.textContent = 'There was an error processing your booking. Please try again or contact us directly.';
          
          els.bookingForm.insertBefore(errorEl, els.submitButton.parentNode);
          
          // Remove error after 5 seconds
          setTimeout(() => {
            errorEl.remove();
          }, 5000);
        } finally {
          // Reset button state
          els.submitButton.disabled = false;
          els.submitButton.classList.remove('loading');
          els.submitButton.querySelector('.button-text').textContent = 'Confirm Booking';
        }
      });
      
      /**
       * Initialize booking page functionality
       * Sets up event listeners and starts dynamic features
       */
      const init = () => {
        // Generate date options
        generateDateGrid();
        
        // Start countdown timer
        startCountdown();
        
        // Start availability counter
        decreaseAvailability();
        
        // Show activity notifications
        showActivityNotifications();
        
        // Step navigation event listeners
        if (els.toStep2) els.toStep2.addEventListener('click', () => goToStep(2));
        if (els.toStep3) els.toStep3.addEventListener('click', () => goToStep(3));
        if (els.toStep4) els.toStep4.addEventListener('click', () => goToStep(4));
        if (els.backToStep1) els.backToStep1.addEventListener('click', () => goToStep(1));
        if (els.backToStep2) els.backToStep2.addEventListener('click', () => goToStep(2));
        if (els.backToStep3) els.backToStep3.addEventListener('click', () => goToStep(3));
        
        // Process URL parameters for pre-selection
        const urlParams = new URLSearchParams(window.location.search);
        const serviceParam = urlParams.get('service');
        
        if (serviceParam) {
          const serviceOption = document.querySelector(`.service-option[data-value="${serviceParam}"]`);
          if (serviceOption) {
            serviceOption.classList.add('selected');
            els.serviceInput.value = serviceParam;
          }
        }
      };
      
      // Initialize the page
      init();
    });
  </script>
</body>
</html>